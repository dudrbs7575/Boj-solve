#include <string>
#include <vector>
#include <iostream>
#include <sstream>
#include <stack>

using namespace std;

stack<int> restoreStack;
char arr[1000001];
int curRow;
int endPoint;

void up(string s){
    char cmd;
    int k;
    stringstream stream;
    stream.str(s);
    stream>>cmd>>k;
    
    int cnt=0;
    int idx=curRow-1;
    while(1){
        if(arr[idx]=='O')
            cnt++;
        if(cnt==k||idx==0){
            curRow=idx;
            break;
        }
        idx--;
    }
}

void down(string s, int n){
    char cmd;
    int k;
    stringstream stream;
    stream.str(s);
    stream>>cmd>>k;
    
    int cnt=0;
    int idx=curRow+1;
    while(1){
        if(arr[idx]=='O')
            cnt++;
        if(cnt==k||idx==n-1){
            curRow=idx;
            break;
        }
        idx++;
    }
}

void remove(string s){
    arr[curRow]='X';
    restoreStack.push(curRow);
    if(curRow==endPoint){
        while(arr[--curRow]=='X'){}
        endPoint=curRow;
    }
    else{
        while(arr[++curRow]=='X'){}
    }
}

void restore(string s){
    if(restoreStack.top()>endPoint)
        endPoint=restoreStack.top();
    arr[restoreStack.top()]='O';
    restoreStack.pop();
}

string solution(int n, int k, vector<string> cmd) {
    string answer = "";
    curRow=k;
    endPoint=n-1;
    
    for(int i=0;i<n;i++)
        arr[i]='O';
    
    for(const string &s : cmd){
        if(s[0]=='U')
            up(s);
        else if(s[0]=='D')
            down(s,n);
        else if(s[0]=='C')
            remove(s);
        else
            restore(s);
    }
    
    for(int i=0;i<n;i++){
        if(arr[i]=='X')
            answer+='X';
        else
            answer+='O';
    }
    
    return answer;
}